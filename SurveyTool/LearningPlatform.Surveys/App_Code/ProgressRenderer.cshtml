@using LearningPlatform.Domain.SurveyLayout
@using LearningPlatform.Helpers

@helper RenderProgress(System.Web.Mvc.HtmlHelper html, int progress)
{
var progressTemplate = html.ViewBag.Layout.GetDefault<SurveyProgressTemplate>();
if (progressTemplate == null)
{
    // progressTemplate is null for surveys launched before the layout improvements.
    progressTemplate = new SurveyProgressTemplate
    {
        IsDefault = true,
        Content = @"
<div class=""row"">
    <label class=""progress-label question-title"">Survey Progress</label>
    <div class=""progress"">
        <div class=""progress-bar"" role=""progressbar"" aria-valuenow=""60"" aria-valuemin=""0"" aria-valuemax=""100"" style=""min-width: 2em; width: @progress%;"">
           @progress%
        </div>
    </div>
</div>"
    };

}
var itemTemplates = progressTemplate.GetTemplateItems();
foreach (var element in itemTemplates)
{
    if (element.ItemType == ItemType.Progress)
    {
            @HtmlHelperExtensions.EvaluateString(html, progress.ToString())
        }
        else if (element.ItemType == ItemType.Html)
        {
            @HtmlHelperExtensions.EvaluateString(html, element.Html)
        }
    }
}

